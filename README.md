# Attendance Time Miscroservice for ADempiere using Rust
A admin and reader attendance for Rust

## Requirements
- Just install [rust](https://www.rust-lang.org/tools/install) from page

```Shell
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

### Production Requirements

```Shell
apt install pkg-config openssl libssl-dev sqlite3 libsqlite3-dev
```

### 

```Shell
diesel setup
```

## Getting Started

### Deploy with docker

You can build images using the follow command

```
docker build -t time-attendance-rs -f docker/Dockerfile .
```

After build just run it

```
docker run -d -p 7878:7878 --name attendance-server -e KAFKA_HOST=0.0.0.0:9092 -e KAFKA_GROUP=default time-attendance-rs
```

### Running project
Just build it and run

### Admin Server

```Shell
cargo build
cargo run --bin admin_server
```

### Console Output
A output generated by the Arduino UNO emulator can be like it:

```Shell
Server Address: "0.0.0.0:7878"
└──!NULL!
    ├──setup
    │   ├──[POST] -> admin_server::create_device
    │   └──[PATCH] -> admin_server::update_device
    ├──users
    │   └──[POST] -> admin_server::create_user
    ├──commands
    │   └──[POST] -> admin_server::create_command
    ├──devices
    │   └──[GET] -> admin_server::get_devices
    └──devices/<id>
        ├──[GET] -> admin_server::get_device
        └──[DELETE] -> admin_server::delete_device
```

### Reader Server

A server for communication between device and server


```Shell
cargo build
cargo run --bin reader_server
```


### Console Output

```Shell
Server Address: "0.0.0.0:8099"
└──!NULL!
    └──[POST] -> reader_server::process
```

### Setup a new Device

The follow is a curl calling for create a Device

- Name: **R y B 01**
- Description: **Comercializador R y B Sucursal 01**
- Serial Number: **2022085383**
- Firmware: **WS535BW1_BSCS_v1.5.31**
- Queue Host: **localhost:9092**
- Queue Name: **default-queue**